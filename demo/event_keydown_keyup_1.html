<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Event keydown keyup</title>
    <link rel="stylesheet" href="grid.css">
    <script src="../an.script_1.0.1.js"></script>
    <style type="text/css"></style>
</head>
<body>

<canvas id="canva"></canvas>

<script>

    (function(){

        var an = new An({selector: '#canva'
            , width: 800
            , height: 400
            , fps: 30
            , autoStart: true
            , autoClear: true
            , enableEventClick: true
            , enableEventMouseMovie: false
            , enableEventKeys: false
        });

        an.glob.game = {};
        an.glob.game.begin = false;
        an.glob.game.score = 0;
        an.glob.game.level = 0;
        an.glob.game.find = 0;
        an.glob.game.rectBtnStartLevel = [10,100,150,30];
        an.glob.game.rectHider1 = [200,200,50,50];
        an.glob.game.rectHider2 = [260,200,50,50];
        an.glob.game.rectHider3 = [320,200,50,50];


        //an.glob.addClickers = function(ctx){};
        //an.glob.removeClickers = function(ctx){};

        an.graphic.hider = function(ctx, rectengle, color){
            ctx.beginPath();
            ctx.lineWidth = 4;
            ctx.strokeStyle = '#212121';
            ctx.fillStyle = color||'#EAF3AB';
            ctx.rect(rectengle[0],rectengle[1],rectengle[2],rectengle[3]);
            ctx.stroke();
            ctx.fill();
        };


        an.graphic.btn = function(ctx,text,x,y){
            ctx.beginPath();
            ctx.lineWidth = 4;
            ctx.strokeStyle = '#34A200';
            ctx.fillStyle = '#EAF3AB';
            ctx.rect(x,y,150,30);
            ctx.stroke();
            ctx.fill();
            ctx.beginPath();
            ctx.font = '12px/12px Arial';
            ctx.textBaseline = 'top';
            ctx.fillStyle = '#180D1E';
            ctx.fillText(text,x+10,y+10);
        };


        // draw debugPanel
        an.scene({
            index: 100,
            runner: function(){an.graphic.debugPanel()}
        });

        // draw game panel
        an.scene({
            index: 100,
            runner: function(ctx){
                ctx.beginPath();
                ctx.fillStyle = 'rgba(65,63,128,.8)';
                ctx.fillRect(10,50,10,10);

                ctx.beginPath();
                ctx.fillStyle = '#002A4A';
                ctx.font = "bold 16px/10px serif";
                var showText = 'LEVEL: ' + an.glob.game.level + ' SCORE: ' + an.glob.game.score + ' FIND: ' + an.glob.game.find;
                ctx.fillText(showText, 10, 80);
            }
        });

        // my scene
        an.scene({
            index: 1,
            runner: function(ctx){
                an.graphic.btn(ctx,'Star level ' + parseInt(an.glob.game.level + 1), 10, 100);

                if(!an.glob.game.begin)
                    an.addEventClick(an.glob.game.rectBtnStartLevel, this.addHiders);
                else{
                    an.graphic.hider(ctx,an.glob.game.rectHider1,'#CDDC39');
                    an.graphic.hider(ctx,an.glob.game.rectHider2,'#285773');
                    an.graphic.hider(ctx,an.glob.game.rectHider3,'#731B05');

                    an.addEventClick(an.glob.game.rectHider1, this.choiceHider);
                    an.addEventClick(an.glob.game.rectHider2, this.choiceHider);
                    an.addEventClick(an.glob.game.rectHider3, this.choiceHider);
                }
            },

            addHiders: function(){
                an.glob.game.begin = true;
                an.removeEventClick(an.glob.game.rectBtnStartLevel);
            },

            choiceHider: function(e){

                an.removeEventClick(an.glob.game.rectHider1);
                an.removeEventClick(an.glob.game.rectHider2);
                an.removeEventClick(an.glob.game.rectHider3);

                if(e.clientX > an.glob.game.rectHider3[0]){
                    console.log(3);

                }else if(e.clientX > an.glob.game.rectHider2[0]){
                    console.log(2);

                }else if(e.clientX > an.glob.game.rectHider1[0]){
                    console.log(1);

                }
            }

        });

        // render all
        an.render();

    })();

</script>

</body>
</html>