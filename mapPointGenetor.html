<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="grid.css">
    <script src="src/an.dev.without_events.js"></script>
    <style>
        *{
            font-family: 'Open Sans', sans-serif;
            font-size: 12px;
        }
        html, body{}
        #pointmap{
            margin: 50px;
        }
        .pmg-box{
            margin: 0;
            padding: 0;

            width: 10px;
            height: 10px;

            border-top: 1px solid #2b2b2b;
            border-left: 1px solid #2b2b2b;
            display: inline-block;
        }
    </style>
</head>
<body>

<div id="pointmap"></div>

<script>


    var PointMapGen = {
        elem: null,
        width: null,
        height: null,
        scale: 5,
        points: []
    };

    PointMapGen.create = function(selector, width, height){
        this.elem = document.querySelector(selector);
        this.width = width;
        this.height = height;
        this.elem.style.margin = 0;
        this.elem.style.padding = 0;
        this.elem.style.fontSize = 0;
        this.elem.style.width = (width*10+10) + 'px';
        this.elem.style.height = (height*10) + 'px';
    };
    PointMapGen.lastPoint = {x: null, y: null};
    PointMapGen.createBox = function(point){

        //console.log(name, point);
// * PointMapGen.scale
        var box = document.createElement('span');
        box.id = 'pmg-' + point.x +'x' + point.y;
        box.active = false;
        box.point = {x: point.x, y: point.y};
        box.tempBackgroundColor = '#fff';
        box.className = 'pmg-box';

        if (point.x == 0 || point.y == 0) {
            box.tempBackgroundColor = '#ddd';
            box.style.backgroundColor = '#ddd';
        }

//        box.style.width = '10px';
//        box.style.height = '10px';
//        box.style.position = 'relation';
//        box.style.float = 'left';
//        box.style.border = '1px solid rgb(236, 236, 236)';

        box.addEventListener('mouseover', function(event) {
            var t = event.target;
            //var p = t.id.split('-')[1].split('x');
            //PointMapGen.lastPoint = {x: p[0], y: p[1]};
            console.log('Point  ', t.point.x * PointMapGen.scale + 'x' + t.point.y * PointMapGen.scale);
            //console.log(PointMapGen.lastPoint);
        });


        box.addEventListener('click', function(event) {
            var t = event.target;
            if (t.active) {
                t.style.backgroundColor = '#555';
            } else
                t.style.backgroundColor = t.tempBackgroundColor;
            t.active = !t.active;
        }, false);

        this.elem.appendChild(box);
    };

    PointMapGen.draw = function(){
        var ix, iy, point = {x: 0, y: 0};
        for (iy = 0; iy < this.width + 1; iy ++) {
            point.y = iy;
            for (ix = 0; ix < this.height + 1; ix ++) {
                point.x = ix;//
                this.createBox(point);
            }
        }
    };

    PointMapGen.create('#pointmap', 20, 20);
    PointMapGen.draw();

</script>
</body>
</html>