<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="can.script.js"></script>
</head>
<body>

<canvas id="can"></canvas>

<script>

var an = new An('#can', 800, 800, 60);

an.scene({
    index:1000,
    name:'display',
    iterator: 0,
    timeLast:0,
    timeStart: new Date().getTime(),
    runner:function(ctx){
        ctx.fillStyle = '#062465';
        ctx.fillRect(0,0,an.width,30);
        ctx.font = '12px/12px Arial';
        ctx.textBaseline = 'top';
        ctx.fillStyle = '#EDEA2A';
        ctx.fillText('Frames: ' + this.iterator, 5, 5);
        ctx.fillText('Secunds: ' + parseInt((new Date().getTime() - this.timeStart) / 1000), 5, 17);

        var timeNow = (new Date).getTime();
        var ftp = (timeNow - this.timeLast)/1000;
        ctx.fillStyle = '#F5E4FF';
        ctx.font = "14px/14px Arial";
        ctx.fillText("FPS: " + parseInt(1/ftp) + '/' + an.fps , 100, 10);
        ctx.fillText("Elements: " + an.lists.scenes.length , 200, 10);

        this.timeLast = timeNow;
        this.iterator ++;
    }
});

an.scene({
    index: 1,
    x: 0,
    runner: function(ctx){
        ctx.fillStyle = '#0A001B';
        ctx.fillRect(0,0,an.width,an.height);
    }
});



for(var i = 0; i<1000; i++){

    var x = an.u.rand(0, 600);
    var y = an.u.rand(0, 400);
    var vx = an.u.rand(-20, 50);
    var vy = an.u.rand(-20, 50);
    var color = an.u.randColor();
    var alpha = Math.random();
    var radius = an.u.rand(2, 30);


    if(radius > 15 && radius < 20){
        vx = an.u.rand(-6, 6);
        vy = an.u.rand(-6, 6);
    }else if(radius >= 20){
        vx = an.u.rand(-4, 4);
        vy = an.u.rand(-4, 4);
    }

    an.scene({
        index:5,
        name:'display',
        deep: 40,
        x: x,
        y: y,
        vx: vx,
        vy: vy,
        color: color,
        alpha: alpha,
        radius: radius,
        runner:function(ctx){

            ctx.beginPath();
            ctx.globalAlpha = this.alpha;
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
            ctx.fillStyle = this.color;
            ctx.fill();
            ctx.closePath();

            this.x += this.vx;
            this.y += this.vy;

            if(this.x > an.width && this.x ) this.vx = -this.vx;
            else if(this.x < 0) this.vx = this.vx * -1;

            if(this.y > an.height ) this.vy = -this.vy;
            else if(this.y < 0) this.vy = this.vy * -1;
        }
    });
}

an.render();

</script>

</body>
</html>